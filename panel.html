<!DOCTYPE html>
<html>
<head>
  <title>WebSocket xAPI Test</title>
</head>
<body>
  <h2>Dial Test</h2>
  <button onclick="dial('5849')">Call Marketing</button>
  <button onclick="dial('2002')">Call Executive</button>

  <script>
    const socketUrl = "wss://10.250.0.100/ws"; // Replace if needed
    let ws;

    function connect() {
      ws = new WebSocket(socketUrl);

      ws.onopen = () => console.log("✅ WebSocket connected");
      ws.onerror = (e) => console.error("❌ WebSocket error:", e);
      ws.onclose = () => console.warn("⚠️ WebSocket closed");

      ws.onmessage = (msg) => console.log("📥 Received:", msg.data);
    }

    function dial(number) {
      if (ws.readyState !== WebSocket.OPEN) {
        alert("WebSocket not connected");
        return;
      }

      const payload = {
        method: "xCommand Dial",
        params: { Number: number }
      };

      ws.send(JSON.stringify(payload));
      console.log("📤 Sent:", payload);
    }

    connect();
  </script>
</body>
</html>
